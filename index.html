<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skylab - Enregistrement Musical</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>

<body>

    <nav>
        <div class="container">
            <div class="logo">Skylab</div>
            <div class="menu-toggle" id="menuToggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <ul id="navMenu">
                <li><a href="#accueil">Accueil</a></li>
                <li><a href="#a-propos">√Ä propos</a></li>
                <li><a href="#services">Services</a></li>
                <li><a href="#beats">Beats</a></li>
                <li><a href="#galerie">Galerie</a></li>
                <li><a href="#contact">Contact</a></li>
            </ul>
        </div>
    </nav>


    <section class="hero" id="accueil">
        <div class="hero-content">
            <h1>Votre musique m√©rite mieux</h1>
            <p>Un studio pens√© par des musiciens, pour des musiciens. Un bon son et une ambiance de travail honn√™te.</p>
            <div class="btn-group">
                <a href="#contact" class="btn btn-primary">R√©server une session</a>
                <a href="#a-propos" class="btn btn-secondary">D√©couvrir le studio</a>
            </div>
        </div>
    </section>


    <section class="about fade-in" id="a-propos">
        <h2 class="section-title">Un studio qui vous ressemble</h2>
        <p class="section-subtitle">Parce que la musique se fait avec des experts, pas avec des d√©butants.</p>
        <div class="about-content">
            <div class="about-text">
                <p>On a mont√© ce studio parce qu'on en avait marre des endroits impersonnels o√π on te fait sentir que tu
                    d√©ranges. Chez nous, que se soit ton premier morceau ou ton ni√®me album, tu seras accueilli de la
                    m√™me fa√ßon.</p>
                <p>Notre approche est simple : on √©coute ce que tu veux faire, on te conseille honn√™tement, et on
                    travaille ensemble jusqu'√† ce que le r√©sultat te plaise vraiment. Pas de pression, pas de jugement.
                </p>
                <p>Le mat√©riel est l√† pour servir ta musique, pas l'inverse. On a ce qu'il faut pour que √ßa sonne bien,
                    mais surtout on prend le temps de comprendre ton univers.</p>
            </div>
            <div class="about-image"></div>
        </div>
    </section>

    <section class="services fade-in" id="services">
        <h2 class="section-title">Nos services</h2>
        <p class="section-subtitle">Des prestations claires, sans myst√®re ni jargon technique inutile.</p>
        <div class="services-grid">
            <div class="service-card">
                <i class="fas fa-microphone"></i>
                <h3>Enregistrement</h3>
                <p>Voix, instruments,... . On prend le temps qu'il faut pour capter ce que tu as en t√™te. Sessions √† la
                    demi-journ√©e ou √† la journ√©e selon ton projet.</p>
                <a href="#contact" class="btn btn-secondary">En parler</a>
            </div>
            <div class="service-card">
                <i class="fas fa-sliders-h"></i>
                <h3>Mix & Mastering</h3>
                <p>Tu as d√©j√† enregistr√© ailleurs ? Pas de souci. On peut reprendre tes pistes et leur donner la couleur
                    que tu cherches. Livraison quand tu veux.</p>
                <a href="#contact" class="btn btn-secondary">En parler</a>
            </div>
            <div class="service-card">
                <i class="fas fa-drum"></i>
                <h3>Beatmaking</h3>
                <p>Besoin d'une instru sur mesure ? On peut cr√©er quelque chose qui colle √† ton style. Plusieurs
                    allers-retours inclus jusqu'√† ce que √ßa te parle vraiment.</p>
                <a href="#contact" class="btn btn-secondary">En parler</a>
            </div>
            <div class="service-card">
                <i class="fas fa-podcast"></i>
                <h3>Podcast & Voice-over</h3>
                <p>Le studio s'adapte aussi aux voix parl√©es. Que ce soit pour un podcast, une pub ou une narration, on
                    te garantit un son propre et professionnel.</p>
                <a href="#contact" class="btn btn-secondary">En parler</a>
            </div>
        </div>
    </section>


    <section class="audio-section fade-in">
        <h2 class="section-title">Derni√®res sessions</h2>
        <p class="section-subtitle">Des extraits de morceaux enregistr√©s ici. Pas de mise en sc√®ne, juste le rendu
            final.</p>
        <div class="audio-player">
            <audio id="audioElement" preload="metadata"></audio>
            <div class="audio-info">
                <div class="audio-cover"></div>
                <div class="audio-details">
                    <h4>Lonely</h4>
                    <p>By M</p>
                </div>
            </div>
            <div class="audio-controls">
                <button id="playButton" class="play-btn"><i class="fas fa-play"></i></button>
                <div class="progress-container">
                    <span id="currentTime" class="time">0:00</span>
                    <div id="progressBar" class="progress-bar">
                        <div id="progressFill" class="progress-fill"></div>
                    </div>
                    <span id="duration" class="time">0:00</span>
                </div>
            </div>
        </div>
    </section>

    <section class="beats fade-in" id="beats">
        <div class="beats-header">
            <div>
                <h2 class="section-title">Nos Beats</h2>
                <p class="section-subtitle">Des instrumentales cr√©√©es au studio. √âcoute, laisse-toi inspirer, et si
                    quelque chose te parle, on en discute.</p>
            </div>
        </div>
        <div class="beats-grid" id="beatsContainer">
            <div class="loading">
                <i class="fas fa-spinner fa-spin fa-2x"></i>
                <p>Chargement des beats...</p>
            </div>
        </div>
        <div style="text-align: center; margin-top: 3rem;">
            <a href="beats.html" class="btn btn-secondary">Voir tous les beats</a>
        </div>
    </section>


    <section class="gallery fade-in" id="galerie">
        <h2 class="section-title">L'ambiance du studio</h2>
        <p class="section-subtitle">Quelques photos prises pendant les sessions. Rien de retouch√©, c'est vraiment comme
            √ßa chez nous.</p>
        <div class="gallery-grid">
            <div class="gallery-item">
                <img src="https://images.unsplash.com/photo-1598653222000-6b7b7a552625?q=80&w=2070" alt="Studio 1">
            </div>
            <div class="gallery-item">
                <img src="Arrangement-scaled-300x225.jpg" alt="Studio 2">
            </div>
            <div class="gallery-item">
                <img src="studio.jpg" alt="Studio 3">
            </div>
            <div class="gallery-item">
                <img src="materiel-enregistrer-chanteur.jpg" alt="Studio 4">
            </div>
        </div>
    </section>


    <section class="contact fade-in" id="contact">
        <h2 class="section-title">Nous contacter ?</h2>
        <p class="section-subtitle">Pose-nous tes questions ou r√©serve directement une session. On te r√©pond rapidement.
        </p>
        <div class="contact-container">
            <form class="contact-form">
                <div class="form-group">
                    <label for="name">Ton nom ou nom d'artiste</label>
                    <input type="text" id="name" required>
                </div>
                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" required>
                </div>
                <div class="form-group">
                    <label for="service">Type de prestation</label>
                    <select id="service" required>
                        <option value="">Choisis une option</option>
                        <option value="enregistrement">Enregistrement</option>
                        <option value="mix">Mix & Mastering</option>
                        <option value="beatmaking">Beatmaking</option>
                        <option value="podcast">Podcast / Voice-over</option>
                        <option value="autre">Autre chose</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="message">Parle-nous de ton projet</label>
                    <textarea id="message" required></textarea>
                </div>
                <button type="submit" class="btn btn-primary">Envoyer</button>
            </form>
            <div class="contact-info">
                <div class="info-item">
                    <i class="fas fa-phone"></i>
                    <div>
                        <h4>T√©l√©phone</h4>
                        <p>+228 97 27 57 98</p>
                    </div>
                </div>
                <div class="info-item">
                    <i class="fas fa-envelope"></i>
                    <div>
                        <h4>Email</h4>
                        <p>lcgroup@gmail.com</p>
                    </div>
                </div>
                <div class="info-item">
                    <i class="fas fa-map-marker-alt"></i>
                    <div>
                        <h4>Adresse</h4>
                        <p>Anfam√©<br>Lom√©</p>
                    </div>
                </div>
                <div class="info-item">
                    <i class="fas fa-clock"></i>
                    <div>
                        <h4>Horaires</h4>
                        <p>Sur rendez-vous<br>6j/7 24h/24</p>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <footer>
        <div class="social-links">
            <a href="#"><i class="fab fa-instagram"></i></a>
            <a href="#"><i class="fab fa-facebook"></i></a>
            <a href="#"><i class="fab fa-youtube"></i></a>
            <a href="#"><i class="fab fa-spotify"></i></a>
        </div>
        <p>&copy; 2025 skylab.</p>
    </footer>

    <script>

        const menuToggle = document.getElementById('menuToggle');
        const navMenu = document.getElementById('navMenu');

        menuToggle.addEventListener('click', () => {
            navMenu.classList.toggle('active');
        });


        document.querySelectorAll('nav a').forEach(link => {
            link.addEventListener('click', () => {
                navMenu.classList.remove('active');
            });
        });


        const fadeElements = document.querySelectorAll('.fade-in');

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, { threshold: 0.1 });

        fadeElements.forEach(el => observer.observe(el));



        const audio = document.getElementById('audioElement');
        const playButton = document.getElementById('playButton');
        const progressBar = document.getElementById('progressBar');
        const progressFill = document.getElementById('progressFill');
        const currentTimeEl = document.getElementById('currentTime');
        const durationEl = document.getElementById('duration');


        audio.src = 'asake.mp3';


        function formatTime(seconds) {
            if (isNaN(seconds)) return '0:00';
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins}:${secs.toString().padStart(2, '0')}`;
        }


        playButton.addEventListener('click', () => {
            if (audio.paused) {
                audio.play();
                playButton.innerHTML = '<i class="fas fa-pause"></i>';
            } else {
                audio.pause();
                playButton.innerHTML = '<i class="fas fa-play"></i>';
            }
        });


        audio.addEventListener('loadedmetadata', () => {
            durationEl.textContent = formatTime(audio.duration);
        });


        audio.addEventListener('timeupdate', () => {
            const progress = (audio.currentTime / audio.duration) * 100;
            progressFill.style.width = progress + '%';
            currentTimeEl.textContent = formatTime(audio.currentTime);
        });


        progressBar.addEventListener('click', (e) => {
            const rect = progressBar.getBoundingClientRect();
            const clickX = e.clientX - rect.left;
            const width = rect.width;
            const percentage = clickX / width;
            audio.currentTime = percentage * audio.duration;
        });


        audio.addEventListener('ended', () => {
            playButton.innerHTML = '<i class="fas fa-play"></i>';
            progressFill.style.width = '0%';
            audio.currentTime = 0;
        });


        const contactForm = document.querySelector('.contact-form');

        contactForm.addEventListener('submit', (e) => {
            e.preventDefault();


            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const service = document.getElementById('service').value;
            const message = document.getElementById('message').value;


            const whatsappMessage = ` *Nouvelle demande - Flex Studio*
    
         *Nom:* ${name}
         *Email:* ${email}
         *Service:* ${service}

         *Message:*
        ${message}`;


            const encodedMessage = encodeURIComponent(whatsappMessage);


            const phoneNumber = '22897275798';


            const whatsappURL = `https://wa.me/${phoneNumber}?text=${encodedMessage}`;


            window.open(whatsappURL, '_blank');


            alert('Merci pour votre message !');
            contactForm.reset();
        });


        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        });
    </script>

    <!-- Supabase CDN -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <script>
        // ========================================
        // CONFIGURATION SUPABASE
        // ========================================
        const SUPABASE_CONFIG = {
            url: 'https://hsrmxdtqqclrqlwvvjuh.supabase.co',
            anonKey: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imhzcm14ZHRxcWNscnFsd3Z2anVoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjczNDg4NTQsImV4cCI6MjA4MjkyNDg1NH0.60g-JNlS7Ysi-eNL8um9lKyauZYyhi4xqW0S6zxgvv0',
            whatsappNumber: '22897275798'
        };

        // Initialiser le client Supabase
        const supabaseClient = window.supabase.createClient(SUPABASE_CONFIG.url, SUPABASE_CONFIG.anonKey);

        // ========================================
        // CHARGEMENT DES BEATS (3 DERNIERS)
        // ========================================
        document.addEventListener('DOMContentLoaded', () => {
            loadBeatsForHome();
        });

        async function loadBeatsForHome() {
            const container = document.getElementById('beatsContainer');

            try {
                // R√©cup√©rer les 3 derniers beats actifs
                const { data: beats, error } = await supabaseClient
                    .from('beats')
                    .select('*')
                    .eq('is_active', true)
                    .order('created_at', { ascending: false })
                    .limit(3);

                if (error) throw error;

                container.innerHTML = '';

                if (!beats || beats.length === 0) {
                    container.innerHTML = '<div class="no-beats"><p>Aucun beat disponible pour le moment.</p></div>';
                    return;
                }

                // Afficher les 3 beats
                beats.forEach(beat => {
                    const beatCard = document.createElement('div');
                    beatCard.className = 'beat-card';
                    beatCard.innerHTML = `
                        <img src="${beat.cover_url || 'https://via.placeholder.com/400x250/1a1a1a/2563eb?text=No+Cover'}" 
                             alt="${beat.title}" 
                             class="beat-cover"
                             onerror="this.src='https://via.placeholder.com/400x250/1a1a1a/2563eb?text=No+Cover'">
                        <div class="beat-info">
                            <h3>${beat.title}</h3>
                            <div class="beat-meta">
                                ${beat.author ? `<span><i class="fas fa-user"></i> ${beat.author}</span>` : ''}
                                ${beat.genre ? `<span><i class="fas fa-music"></i> ${beat.genre}</span>` : ''}
                                ${beat.bpm ? `<span><i class="fas fa-drum"></i> ${beat.bpm} BPM</span>` : ''}
                            </div>
                            <div class="beat-audio">
                                <audio controls controlsList="nodownload" oncontextmenu="return false;">
                                    <source src="${beat.audio_url}" type="audio/mpeg">
                                    Votre navigateur ne supporte pas l'audio.
                                </audio>
                            </div>
                            <button class="btn-commander" onclick="commandBeat('${beat.title}', '${beat.author || ''}', '${beat.genre || ''}', '${beat.bpm || ''}')">
                                <i class="fab fa-whatsapp"></i> Commander
                            </button>
                        </div>
                    `;

                    // Add single playback logic
                    const audio = beatCard.querySelector('audio');
                    audio.addEventListener('play', () => {
                        document.querySelectorAll('audio').forEach(otherAudio => {
                            if (otherAudio !== audio) {
                                otherAudio.pause();
                            }
                        });
                    });

                    container.appendChild(beatCard);
                });

            } catch (error) {
                console.error('Erreur lors du chargement des beats:', error);
                container.innerHTML = `
            <div class="no-beats">
                <p>Impossible de charger les beats pour le moment.</p>
            </div>
            `;
            }
        }

        function commandBeat(title, author, genre, bpm) {
            const message = `Bonjour,
            Je souhaite commander le beat :

            üéµ Nom : ${title}
            ${author ? `üë§ Auteur : ${author}` : ''}
            ${genre ? `üéß Genre : ${genre}` : ''}
            ${bpm ? `üî• BPM : ${bpm}` : ''}

            Merci.`;

            const encodedMessage = encodeURIComponent(message);
            const whatsappURL = `https://wa.me/${SUPABASE_CONFIG.whatsappNumber}?text=${encodedMessage}`;

            window.open(whatsappURL, '_blank');
        }
    </script>
</body>

</html>